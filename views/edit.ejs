<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Edit Student Information</title>
  </head>

  <body>

    <style>
      /* Import Google font - Poppins */
      @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700;900&display=swap');

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Poppins", sans-serif;
      }

      body {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        background: #152733;
      }

      .container {
        position: relative;
        max-width: 700px;
        width: 100%;
        background: #fff;
        padding: 25px;
        border-radius: 8px;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
      }

      .container header {
        font-size: 1.5rem;
        color: #333;
        font-weight: 500;
        text-align: center;
      }

      .container .form {
        margin-top: 30px;
      }

      .form .input-box {
        width: 100%;
        margin-top: 20px;
      }

      .input-box label {
        color: #333;
      }

      .form :where(.input-box input, .select-box) {
        position: relative;
        height: 50px;
        width: 100%;
        outline: none;
        font-size: 1rem;
        color: #707070;
        margin-top: 8px;
        border: 1px solid #ddd;
        border-radius: 6px;
        padding: 0 15px;
      }

      .input-box input:focus {
        box-shadow: 0 1px 0 rgba(0, 0, 0, 0.1);
      }

      .form .column {
        display: flex;
        column-gap: 15px;
      }

      .form .gender-box {
        margin-top: 20px;
      }

      .gender-box h3 {
        color: #333;
        font-size: 1rem;
        font-weight: 400;
        margin-bottom: 8px;
      }

      .form :where(.gender-option, .gender) {
        display: flex;
        align-items: center;
        column-gap: 50px;
        flex-wrap: wrap;
      }

      .form .gender {
        column-gap: 5px;
      }

      .gender input {
        accent-color: #474d53;
      }

      .form :where(.gender input, .gender label) {
        cursor: pointer;
      }

      .gender label {
        color: #707070;
      }

      .address :where(input, .select-box) {
        margin-top: 15px;
      }

      .select-box select {
        height: 100%;
        width: 100%;
        outline: none;
        border: none;
        color: #707070;
        font-size: 1rem;
      }

      .form a:link {
        height: 55px;
        width: 100%;
        padding: 14px 25px;
        text-align: center;
        color: #fff;
        font-size: 1rem;
        font-weight: 400;
        margin-top: 30px;
        border: none;
        cursor: pointer;
        transition: all 0.2s ease;
        text-decoration: none;
        background: #6C757D;
      }

      .form a:hover {
        background: #474d53;
      }

      .form button {
        height: 55px;
        width: 100%;
        color: #fff;
        font-size: 1rem;
        font-weight: 400;
        margin-top: 30px;
        border: none;
        cursor: pointer;
        transition: all 0.2s ease;
        background: #6C757D;
      }

      .form button:hover {
        background: #474d53;
      }

      /*Responsive*/
      @media screen and (max-width: 500px) {
        .form .column {
          flex-wrap: wrap;
        }

        .form :where(.gender-option, .gender) {
          row-gap: 15px;
        }
      }
    </style>

    <section class="container">
      <header>Edit Student Information</header>
      <form class="form" action="/edit/<%= student.id %>" method="post">

        <div class="column">
          <div class="input-box">
            <label>First Name</label>
            <input type="text" name="firstname" value="<%= student.firstname%>" disabled />
          </div>
          <div class="input-box">
            <label>Middle Name</label>
            <input type="text" name="middlename" value="<%= student.middlename%>" disabled />
          </div>
          <div class="input-box">
            <label>Last Name</label>
            <input type="text" name="lastname" value="<%= student.lastname%>" disabled />
          </div>
        </div>

        <div class="column">
          <div class="input-box">
            <label>Civil Status</label>
            <div class="select-box">
              <select name="civilstatus" value="<%= student.civilstatus%>" required >
                <option hidden>Select Status</option>
                <option value="single">Single</option>
                <option value="married">Married</option>
                <option value="divorce">Divorced</option>
                <option value="widowed">Widowed</option>
                <option value="separated">Separated</option>
              </select>
            </div>
          </div>
          <div class="input-box">
            <label>Gender</label>
            <div class="select-box">
              <select name="gender" value="<%= student.gender%>" required >
                <option hidden>Select Gender</option>
                <option value="female">Female</option>
                <option value="male">Male</option>
                <option value="prefer not to say">Prefer not to say</option>
              </select>
            </div>
          </div>
          <div class="input-box">
            <label>Birth Date</label>
            <input type="date"  name="birthdate" value="<%= student.birthdate%>" disabled />
          </div>
        </div>
        <div class="input-box address">
          <label>Address</label>
          <input type="text" name="address" value="<%= student.address%>" required />
          <div class="column">
            <div class="select-box">
              <select type="text" class="form-select country" id="country" name="country" value="<%= student.country%>"
                required>
                <option selected disabled value="">Select Country</option>
              </select>
            </div>
            <div class="select-box">
              <select type="text" class="form-select region" id="region" name="region" value="<%= student.region%>"
                required>
                <option selected disabled value="">Select Region</option>
              </select>
            </div>
          </div>
          <div class="column">
            <div class="select-box">
              <select type="text" class="form-select city" id="city" name="city" value="<%= student.city%>" required>
                <option selected disabled value="">Select City</option>
              </select>
            </div>
            <input type="number" name="zipcode" value="<%= student.zipcode%>" required />
          </div>
        </div>

        <div class="input-box">
          <label>Hobby</label>
          <input type="text" name="hobbies" value="<%= student.hobbies%>" required />
        </div>

      <div class="column">
        <button id="submit" type="submit" class="btn btn-primary">Save</button>
        <a style="color: #ffffff;" href="/home">Go Back</a>
      </div>

      </form>
    </section>

  </body>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
    crossorigin="anonymous"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

  <script>
    $(document).ready(function () {
      //-------------------------------SELECT CASCADING-------------------------//
      var selectedCountry = (selectedRegion = selectedCity = "");
      // This is a demo API key for testing purposes. You should rather request your API key (free) from http://battuta.medunes.net/
      var BATTUTA_KEY = "00000000000000000000000000000000";
      // Populate country select box from battuta API
      url =
        "https://battuta.medunes.net/api/country/all/?key=" +
        BATTUTA_KEY +
        "&callback=?";

      // EXTRACT JSON DATA.
      $.getJSON(url, function (data) {
        console.log(data);
        $.each(data, function (index, value) {
          // APPEND OR INSERT DATA TO SELECT ELEMENT.
          $("#country").append(
            '<option value="' + value.code + '">' + value.name + "</option>"
          );
        });
      });
      // Country selected --> update region list .
      $("#country").change(function () {
        selectedCountry = this.options[this.selectedIndex].text;
        countryCode = $("#country").val();
        // Populate country select box from battuta API
        url =
          "https://battuta.medunes.net/api/region/" +
          countryCode +
          "/all/?key=" +
          BATTUTA_KEY +
          "&callback=?";
        $.getJSON(url, function (data) {
          $("#region option").remove();
          $('#region').append('<option selected disabled value="">Select Region</option>');
          $.each(data, function (index, value) {
            // APPEND OR INSERT DATA TO SELECT ELEMENT.
            $("#region").append(
              '<option value="' + value.region + '">' + value.region + "</option>"
            );
          });
        });
      });
      // Region selected --> updated city list
      $("#region").on("change", function () {
        selectedRegion = this.options[this.selectedIndex].text;
        // Populate country select box from battuta API
        countryCode = $("#country").val();
        region = $("#region").val();
        url =
          "https://battuta.medunes.net/api/city/" +
          countryCode +
          "/search/?region=" +
          region +
          "&key=" +
          BATTUTA_KEY +
          "&callback=?";
        $.getJSON(url, function (data) {
          console.log(data);
          $("#city option").remove();
          $('#city').append('<option selected disabled value="">Select City</option>');
          $.each(data, function (index, value) {
            // APPEND OR INSERT DATA TO SELECT ELEMENT.
            $("#city").append(
              '<option value="' + value.city + '">' + value.city + "</option>"
            );
          });
        });
      });
      // city selected --> update location string
      $("#city").on("change", function () {
        selectedCity = this.options[this.selectedIndex].text;
        $("#location").html(
          "Locatation: Country: " +
          selectedCountry +
          ", Region: " +
          selectedRegion +
          ", City: " +
          selectedCity
        );
      });
    });


  </script>

</html>